<!DOCTYPE html>
<html>
<head>
    <title>API Test Page</title>
    <style>
        body { padding: 20px; font-family: Arial; }
        .endpoint { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        button { padding: 10px; margin: 10px 0; }
        pre { background: #f5f5f5; padding: 10px; }
    </style>
</head>
<body>
    <h1>API Test Page</h1>
    
    <div class="endpoint">
        <h2>Health Check</h2>
        <button onclick="testHealth()">Test Health</button>
        <pre id="healthResult"></pre>
    </div>

    <div class="endpoint">
        <h2>Language Detection</h2>
        <input type="text" id="textInput" value="नमस्ते" />
        <button onclick="testLanguageDetection()">Detect Language</button>
        <pre id="detectResult"></pre>
    </div>

    <div class="endpoint">
        <h2>Supported Languages</h2>
        <button onclick="testSupportedLanguages()">Get Languages</button>
        <pre id="languagesResult"></pre>
    </div>

    <div class="endpoint">
        <h2>Weather Data</h2>
        <div>
            <label>Latitude:</label>
            <input type="text" id="latInput" value="28.6139" /> <!-- Delhi's coordinates -->
            <label>Longitude:</label>
            <input type="text" id="lonInput" value="77.2090" />
        </div>
        <button onclick="testWeather()">Get Weather</button>
        <button onclick="testForecast()">Get Forecast</button>
        <pre id="weatherResult"></pre>
    </div>

    <script>
        async function testHealth() {
            const response = await fetch('http://localhost:3000/health');
            const result = await response.json();
            document.getElementById('healthResult').textContent = JSON.stringify(result, null, 2);
        }

        async function testLanguageDetection() {
            const text = document.getElementById('textInput').value;
            const response = await fetch('http://localhost:3000/api/language/detect', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text })
            });
            const result = await response.json();
            document.getElementById('detectResult').textContent = JSON.stringify(result, null, 2);
        }

        async function testSupportedLanguages() {
            const response = await fetch('http://localhost:3000/api/language/supported');
            const result = await response.json();
            document.getElementById('languagesResult').textContent = JSON.stringify(result, null, 2);
        }

        async function testWeather() {
            const lat = document.getElementById('latInput').value;
            const lon = document.getElementById('lonInput').value;
            const response = await fetch(`http://localhost:3000/api/weather/current?lat=${lat}&lon=${lon}`);
            const result = await response.json();
            document.getElementById('weatherResult').textContent = JSON.stringify(result, null, 2);
        }

        async function testForecast() {
            const lat = document.getElementById('latInput').value;
            const lon = document.getElementById('lonInput').value;
            const response = await fetch(`http://localhost:3000/api/weather/forecast?lat=${lat}&lon=${lon}`);
            const result = await response.json();
            document.getElementById('weatherResult').textContent = JSON.stringify(result, null, 2);
        }
    </script>
</body>
</html> 